"use strict";(self.webpackChunkreact_way_of_samurai=self.webpackChunkreact_way_of_samurai||[]).push([[138],{9138:function(e,s,r){r.r(s),r.d(s,{default:function(){return G}});var t="Profile_profile__VHbzQ",n=r(8683),a=r(2791),i=r(8687),o=r(7781),l=r(5987),u="MyPosts_postsBlock__lB-pf",c="MyPosts_posts__GSiZ2",d="Post_item__Yu4oG",f=r(184),p=function(e){var s=e.post,r=s.message,t=s.likesCount,n=s.user.avatar;return(0,f.jsxs)("div",{className:d,children:[(0,f.jsx)("img",{src:n.large.src,alt:n.large.title}),r,(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{children:" like "}),t]})]})},h=r(5705),x="PostForm_postForm__Ibn04",m="PostForm_formElement__jbLWB",j=function(e){var s=e.values,r=e.handleChange,t=e.handleBlur,n=e.handleSubmit,a=e.isSubmitting;e.onPostChange;return(0,f.jsxs)("form",{onSubmit:n,className:x,children:[(0,f.jsx)("div",{className:m,children:(0,f.jsx)(h.gN,{type:"text",name:"message",as:"textarea",value:s.message,onChange:r,onBlur:t})}),(0,f.jsx)("div",{className:m,children:(0,f.jsx)("button",{type:"submit",disabled:a,children:"Submit"})})]})},v=function(e){var s={message:e.newPostText};return(0,f.jsx)(h.J9,{initialValues:s,onSubmit:e.onAddPost,children:j})},_=["id"],P=function(e){var s=e.posts,r=e.addProfilePost,t=e.newPostText,a=e.userId,i=e.authUserId,o=s.map((function(e){var s=e.id,r=(0,l.Z)(e,_);return(0,f.jsx)(p,{id:s,post:r},s)}));return(0,f.jsxs)("div",{className:u,children:[(0,f.jsx)("h1",{children:"My posts"}),(0,f.jsx)("div",{className:c,children:o}),(0,f.jsx)(v,{onAddPost:function(e,s){var t=s.resetForm;return r((0,n.Z)((0,n.Z)({},e),{},{userId:a,authorId:i})),t()},newPostText:t,userId:a})]})},g=r(3345),I=r(5628),b={addProfilePost:g.df,getProfilePosts:g.MX},N=function(e,s){return JSON.stringify(e)!==JSON.stringify(s)},S=function(e){return(0,f.jsx)(P,(0,n.Z)((0,n.Z)({},e),{},{userId:e.router.params.id||e.authUserId}))},Z=(0,o.qC)(I.Z,(0,i.$j)((function(e){var s=e.profilePage,r=e.auth;return{posts:s.posts,newPostText:s.newPostText,authUserId:r.userId}}),b))(a.memo(S,N)),k=r(3144),y=r(5671),w=r(9340),C=r(2882),B="ProfileInfo_descriptionBlock__XBXuJ",E="ProfileInfo_photoSection__KBiJ2",F="ProfileInfo_infoSection__qfEn4",J="ProfileInfo_info__lZgkT",T=r(885),U="ProfileStatus_status__RTL2w",A="ProfileStatus_statusElement__Xthfb",M=function(e){var s=(0,a.useState)(!1),r=(0,T.Z)(s,2),t=r[0],n=r[1],i=(0,a.useState)(!1),o=(0,T.Z)(i,2),l=o[0],u=o[1],c=(0,a.useState)(e.status),d=(0,T.Z)(c,2),p=d[0],h=d[1];(0,a.useEffect)(function(e){var s=e.props,r=e.setIsEditable;return function(){return s.auth.userId===s.profileUserId?r(!0):r(!1)}}({props:e,setIsEditable:u})),(0,a.useEffect)(function(e){var s=e.props,r=e.setIsEditable,t=e.setStatus;return function(){s.auth.userId===s.profileUserId&&(r(!0),t(s.status)),s.auth.userId!==s.profileUserId&&(r(!1),t(s.status))}}({props:e,setIsEditable:u,setStatus:h}),[e.status]);var x=function(){if(l&&(n(!t),t))return e.updateProfile({id:e.auth.userId,status:p})};return(0,f.jsxs)("div",{className:U,children:[(0,f.jsx)("span",{children:"Status:"}),t&&l?(0,f.jsx)("div",{className:A,children:(0,f.jsx)("input",{autoFocus:!0,onBlur:x,onChange:function(e){return h(e.currentTarget.value)},value:p})}):(0,f.jsx)("div",{className:A,children:(0,f.jsx)("span",{onDoubleClick:x,children:e.status||"---"})})]})},X=r(4904),q=function(e){return e.profile?(0,f.jsx)("div",{children:(0,f.jsxs)("div",{className:B,children:[(0,f.jsx)("div",{className:E,children:(0,f.jsx)("img",{src:e.profile.avatar.large.src,alt:e.profile.avatar.large.title})}),(0,f.jsxs)("div",{className:F,children:[(0,f.jsx)(M,{status:e.profile.status,profileUserId:e.profile.userId,updateProfile:e.updateProfile,auth:e.auth}),(0,f.jsxs)("div",{className:J,children:[(0,f.jsx)("span",{children:"Full name: "})," ",e.profile.fullName]}),(0,f.jsxs)("div",{className:J,children:[(0,f.jsx)("span",{children:"About Me:"})," ",e.profile.aboutMe]}),(0,f.jsxs)("div",{className:J,children:[(0,f.jsx)("span",{children:"Looking for a job: "})," ",e.profile.lookingForAJob?"Yes":"No"]}),(0,f.jsxs)("div",{className:J,children:[(0,f.jsx)("span",{children:"Job description: "})," ",e.profile.lookingForAJobDescription]}),Object.keys(e.profile.contacts).map((function(s,r){return(0,f.jsxs)("div",{className:J,children:[(0,f.jsxs)("span",{children:[s,": "]})," ",(0,f.jsx)("a",{href:e.profile.contacts[s],children:e.profile.contacts[s]})]},r)}))]})]})}):(0,f.jsx)(X.Z,{preloader:e.preloader})},L={updateProfile:g.ck},O=function(e){(0,w.Z)(r,e);var s=(0,C.Z)(r);function r(){var e;(0,y.Z)(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=s.call.apply(s,[this].concat(a))).render=function(){return(0,f.jsx)(q,(0,n.Z)({},e.props))},e}return(0,k.Z)(r)}(a.Component),D=(0,o.qC)(I.Z,(0,i.$j)((function(e){var s=e.profilePage,r=e.auth,t=e.preloader;return{auth:r,profile:s.profile,preloader:t}}),L))(O),G=function(){return(0,f.jsxs)("div",{className:t,children:[(0,f.jsx)(D,{}),(0,f.jsx)(Z,{})]})}}}]);
//# sourceMappingURL=138.f5bbe141.chunk.js.map